{"meta":{"title":"whisshe's blog","subtitle":null,"description":null,"author":"John Doe","url":"https://whisshe.github.io","root":"/"},"pages":[],"posts":[{"title":"gitlab 搭建","slug":"gitLab","date":"2019-09-14T00:36:37.533Z","updated":"2019-09-14T06:18:04.346Z","comments":true,"path":"2019/09/14/gitLab/","link":"","permalink":"https://whisshe.github.io/2019/09/14/gitLab/","excerpt":"","text":"2018-4-3搭建#配置要求 1核2G #系统要求 centos7(其实centos6也可以安装) 安装 配置yum源 vim /etc/yum.repos.d/gitlab-ce.repo #添加以下内容 [gitlab-ce] name=gitlab-ce baseurl=http://mirrors.tuna.tsinghua.edu.cn/gitlab-ce/yum/el6 Repo_gpgcheck=0 Enabled=1 Gpgkey=https://packages.gitlab.com/gpg.key 更新yum缓存 yum makecache #安装最新社区版的gitlab yum intall gitlab-ce 根据需求修改配置文件 #配置文件为/etc/gitlab/gitlab.rb 有端口冲突的进行修改 修改root密码gitlab-rails console production #以root用户运行，进入修改密码交互命令行 user = User.where(id: 1).first #将user定义为root user.password = &apos;secret_pass&apos; #设置密码(密码长度要超过8个) user.password_confirmation = &apos;secret_pass&apos; #确认密码 user.save #保存密码 quit #退出交互命令行 邮件#修改/etc/gitlab/gitlab.rb，需要邮箱开启smtp gitlab_rails[&apos;gitlab_email_enabled&apos;] = true gitlab_rails[&apos;gitlab_email_from&apos;] = &apos;邮箱&apos; gitlab_rails[&apos;gitlab_email_display_name&apos;] = &apos;Example&apos; gitlab_rails[&apos;gitlab_email_reply_to&apos;] = &apos;noreply@example.com&apos; gitlab_rails[&apos;gitlab_email_subject_suffix&apos;] = &apos;&apos; gitlab_rails[&apos;smtp_enable&apos;] = true gitlab_rails[&apos;smtp_address&apos;] = &quot;smtp.qq.com&quot; gitlab_rails[&apos;smtp_port&apos;] = 587 gitlab_rails[&apos;smtp_user_name&apos;] = &quot;邮箱&quot; gitlab_rails[&apos;smtp_password&apos;] = &quot;邮件密码&quot; gitlab_rails[&apos;smtp_domain&apos;] = &quot;邮箱&quot; gitlab_rails[&apos;smtp_authentication&apos;] = &quot;plain&quot; gitlab_rails[&apos;smtp_enable_starttls_auto&apos;] = true gitlab_rails[&apos;smtp_tls&apos;] = false user[&apos;git_user_email&apos;] = &quot;gitlab@qq.com}&quot; 中文支持git clone https://gitlab.com/xhang/gitlab.git #可以加-b version。对应你的版本，查看对应的branch去下载 gitlab-ctl stop #先停止gitlab服务 \\cp -rp gitlab/* /opt/gitlab/embedded/service/gitlab-rails/ #将汉化替换进目标目录，会出现几个cannot overwrite，是正常的 gitlab-ctl reconfigure #重新配置 gitlab-ctl start #启动服务 gitlab-ctl reconfigure #出现502的情况的话，再直接重载配置一遍 出现的问题 出现401错误 修改/etc/gitlab/gitlab.rb nginx[&apos;enable&apos;] = true nginx[&apos;listen_port&apos;] = 90 由于gitlab的nginx默认的端口为80，与本机的80端口冲突，所以修改为90 出现502错误 gitlab-ctl reconfigure #出现502的情况的话，再直接重载配置一遍 内网穿透支持ngrokfrp Gitlab内外网1234567891011121314151617外网gitlab地址 gitlab.ngrok.pkgame.netssh通道 ssh://git@gitlab.ngrok.pkgame.net:1122/&lt;group&gt;/&lt;project&gt;.git外网环境操作(不在公司)git clone ssh://git@gitlab.ngrok.pkgame.net:1122/&lt;group&gt;/&lt;project&gt;.git #克隆远程项目git remote add &lt;name&gt; ssh://git@gitlab.ngrok.pkgame.net:1122/&lt;group&gt;/&lt;project&gt;.git #关联远程项目git pull &lt;name&gt; &lt;branch&gt; #拉取代码git push &lt;name&gt; &lt;branch&gt; #推送代码内网(在公司，速度会快20倍)可以将gitlab地址绑定至192.168.1.19(域名可自定义,修改方法百度)ssh通道 git@192.168.1.19:&lt;group&gt;/&lt;project&gt;.git(绑定了域名的话，IP可换为域名)在内网环境的项目下操作git clone git@domain:&lt;group&gt;/&lt;project&gt;.git #克隆远程项目git remote add &lt;name&gt; git@domain:&lt;group&gt;/&lt;project&gt;.git #关联远程项目git pull &lt;name&gt; &lt;branch&gt; #拉取代码git push &lt;name&gt; &lt;branch&gt; #推送代码","categories":[{"name":"Git","slug":"Git","permalink":"https://whisshe.github.io/categories/Git/"}],"tags":[]},{"title":"Hello World","slug":"hello-world","date":"2019-09-13T09:07:32.243Z","updated":"2019-09-14T06:19:07.707Z","comments":true,"path":"2019/09/13/hello-world/","link":"","permalink":"https://whisshe.github.io/2019/09/13/hello-world/","excerpt":"","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new \"My New Post\" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","categories":[],"tags":[]}]}